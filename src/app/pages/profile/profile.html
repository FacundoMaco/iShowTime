<!-- Botón para abrir el slidebar -->
<button class="profile-toggle-btn" (click)="toggleSlidebar()" *ngIf="userProfile">
  <img [src]="userProfile.avatar" [alt]="userProfile.name" class="profile-avatar-small">
  <span class="profile-name">{{ userProfile.name }}</span>
</button>

<!-- Overlay para cerrar el slidebar -->
<div class="slidebar-overlay" 
     [class.active]="isSlidebarOpen" 
     (click)="onOverlayClick($event)">
</div>

<!-- Slidebar del perfil -->
<div class="profile-slidebar" [class.open]="isSlidebarOpen">
  <!-- Header del slidebar -->
  <div class="slidebar-header">
    <h2>Mi Perfil</h2>
    <button class="close-btn" (click)="closeSlidebar()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  <!-- Contenido del perfil -->
  <div class="profile-content">
    <!-- Loading state -->
    <div class="loading-container" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <p>Cargando perfil...</p>
    </div>

    <!-- Profile data -->
    <div class="profile-data" *ngIf="!isLoading && userProfile">
      <!-- Avatar y nombre -->
      <div class="profile-header">
        <div class="avatar-container">
          <img [src]="userProfile.avatar" [alt]="userProfile.name" class="profile-avatar">
          <button class="edit-avatar-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
          </button>
        </div>
        <h3 class="user-name">{{ userProfile.name }}</h3>
        <p class="user-email">{{ userProfile.email }}</p>
      </div>

      <!-- Información del usuario -->
      <div class="profile-info">
        <div class="info-item">
          <div class="info-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            Teléfono
          </div>
          <p class="info-value">{{ userProfile.phone || 'No especificado' }}</p>
        </div>

        <div class="info-item">
          <div class="info-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            Miembro desde
          </div>
          <p class="info-value">{{ userProfile.joinDate | date:'longDate':'':'es' }}</p>
        </div>

        <div class="info-item">
          <div class="info-label">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 11H1l8-8 8 8h-8v8z"></path>
            </svg>
            Eventos creados
          </div>
          <p class="info-value">{{ userProfile.eventsCount }} eventos</p>
        </div>
      </div>

      <!-- Bio -->
      <div class="profile-bio" *ngIf="userProfile.bio">
        <h4>Acerca de mí</h4>
        <p>{{ userProfile.bio }}</p>
      </div>

      <!-- Acciones -->
      <div class="profile-actions">
        <button class="action-btn primary" (click)="onEditProfile()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
          Editar Perfil
        </button>
        
        <button class="action-btn secondary" (click)="onLogout()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16,17 21,12 16,7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          Cerrar Sesión
        </button>
      </div>
    </div>
  </div>
</div> 